"use strict";(()=>{var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var h=p(d=>{var I=e=>new Promise(t=>setTimeout(t,e)),g=global.exports.TSLib;global.exports("getDistance",(e,t)=>{let r=e[0]-t[0],o=e[1]-t[1],l=e[2]-t[2],n=Math.sqrt(r*r+o*o+l*l);return console.log(`getDistance has returned coords1=${e}, coords2=${t}, distance=${n}`),n});global.exports("getClosestPlayer",(e,t)=>{let r=GetActivePlayers(),o=-1,l=null,n=null;t=t||2;let y=PlayerId();for(let c=0;c<r.length;c++){let s=r[c];if(s!==y){let a=GetPlayerPed(s),P=GetEntityCoords(a,!0),f=g.getDistance(e,P);f<t&&(t=f,o=s,l=a,n=P)}}return{closestId:o,closestPed:l,closestCoords:n}});global.exports("loadAnimDict",async e=>{for(RequestAnimDict(e);!HasAnimDictLoaded(e);)await I(100)});var i=!1;global.exports("Handcuff",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports.TSLib.getClosestPlayer(e,2).closestId;if(r!==-1){let o=GetPlayerServerId(r);emitNet("Handcuff",o)}else console.log("No player found within the specified distance.")});onNet("Handcuff",async()=>{let e=GetPlayerPed(-1);i||(await g.loadAnimDict("mp_arresting"),TaskPlayAnim(e,"mp_arresting","idle",8,-8,-1,49,0,!1,!1,!1),SetEnableHandcuffs(e,!0),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),i=!0)});global.exports("RemoveHandcuffs",async()=>{let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports.TSLib.getClosestPlayer(e,2).closestId;if(r!==-1){let o=GetPlayerServerId(r);emitNet("RemoveHandcuff",o)}else console.log("No player found within the specified distance.")});onNet("RemoveHandcuff",async()=>{let e=GetPlayerPed(-1);i&&(ClearPedSecondaryTask(e),SetEnableHandcuffs(e,!1),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),i=!1)});var m,b=-1,u=!1;global.exports("DragPlayer",()=>{console.log("dragging player");let e=GetEntityCoords(PlayerPedId(),!0),r=global.exports.TSLib.getClosestPlayer(e,2).closestId;if(r!==-1){let o=GetPlayerServerId(r);m=o,emitNet("Drag",o,GetPlayerServerId(PlayerId()))}else console.log("There is no player nearby!")});onNet("Drag",(e,t)=>{let r=GetPlayerServerId(PlayerId()),o=GetPlayerPed(-1);e===r&&(b=t,u=!u,u?SetEnableHandcuffs(o,!0):SetEnableHandcuffs(o,!1))});d("ForceIntoVehicle",()=>{let e=PlayerPedId(),t=GetEntityCoords(e,!0),o=d.TSLib.getClosestPlayer(t,2).closestId;if(console.log(o,GetPlayerServerId(o)),o<=0)return emit("MP-Elements:SendNotification",2,"No player found",500);emitNet("ForceIntoVehicle",GetPlayerServerId(o),o)});onNet("ForceIntoVehicle",(e,t)=>{console.log(1);let r=GetPlayerPed(t),o=PlayerPedId(),l=GetEntityCoords(o,!0),[n,y,c]=[l[0],l[1],l[2]],s=GetClosestVehicle(n,y,c,5,0,127);if(console.log(s),s){console.log(2);let a=GetEntityCoords(s,!0);GetDistanceBetweenCoords(l[0],l[1],l[2],a[0],a[1],a[2],!0)<5&&(console.log(r),console.log(`Warping player ${e} into seat: 2`),TaskWarpPedIntoVehicle(r,s,2))}else console.log("No vehicle available or no nearest player found.")});d("ForceOutOfVehicle",()=>{let e=PlayerPedId(),t=GetEntityCoords(e,!0),o=d.TSLib.getClosestPlayer(t,2).closestId;if(console.log(o,GetPlayerServerId(o)),o<=0)return emit("MP-Elements:SendNotification",2,"No player found",500);emitNet("ForceOutOfVehicle",GetPlayerServerId(o),o)});onNet("ForceOutOfVehicle",e=>{console.log("Attempting to remove player from vehicle");let t=GetPlayerPed(e),r=GetVehiclePedIsIn(t,!0);r!==0?(console.log("Player is in a vehicle, attempting to remove..."),setImmediate(()=>{TaskLeaveAnyVehicle(t,r,16)})):console.log("Player is not in a vehicle.")})});h();})();
